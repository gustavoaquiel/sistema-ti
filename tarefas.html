<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GestÃ£o de Tempo - JBS Couros</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins', sans-serif;
}

body{
    background: linear-gradient(135deg,#0a1f44,#123a7a,#1e90ff);
    min-height:100vh;
    color:white;
}


header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px 40px;
    background:rgba(0,0,0,0.3);
    backdrop-filter: blur(10px);
}

header img{
    height:40px;
}

nav a{
    color:white;
    margin-left:20px;
    text-decoration:none;
    font-weight:500;
}

nav a:hover{
    opacity:0.7;
}


.form-area{
    background:white;
    color:#333;
    margin:30px auto 0;
    padding:25px;
    width:90%;
    max-width:1000px;
    border-radius:15px;
    box-shadow:0 10px 25px rgba(0,0,0,0.2);
    display:flex;
    flex-wrap:wrap;
    gap:15px;
    align-items:center;
}

.form-area input, .form-area select{
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
}

.form-area input[type="text"]{
    flex:2;
}

.form-area input[type="date"]{
    flex:1;
}

.form-area select{
    flex:1;
}

.form-area button{
    background:#0a1f44;
    color:white;
    border:none;
    padding:10px 20px;
    border-radius:8px;
    cursor:pointer;
}

.form-area button:hover{
    background:#062a66;
}


.kanban{
    display:flex;
    gap:20px;
    padding:20px;
    flex-wrap:wrap;
}

.coluna{
    flex:1;
    min-width:300px;
    background:rgba(255,255,255,0.15);
    backdrop-filter: blur(12px);
    padding:20px;
    border-radius:15px;
}

.coluna h3{
    margin-bottom:15px;
}


.card{
    background:white;
    color:#333;
    padding:15px;
    border-radius:10px;
    margin-bottom:10px;
    box-shadow:0 5px 15px rgba(0,0,0,0.15);
    position:relative;
}

.card small{
    display:block;
    margin-top:5px;
    color:#666;
}


.card-actions{
    position:absolute;
    top:10px;
    right:10px;
}

.card-actions i{
    margin-left:10px;
    cursor:pointer;
}

.fa-check{
    color:green;
}

.fa-trash{
    color:red;
}

.concluida{
    opacity:0.6;
    text-decoration:line-through;
}


.footer-tarefas{
    text-align:center;
    margin:20px auto 30px;
    font-size:13px;
}

.footer-tarefas a{
    color:white;
    text-decoration:underline;
}
</style>
</head>

<body>

<header>
    <img src="imagens/logojbs.jfif">
    <nav>
        <a href="tarefas.html">Tarefas</a>
        <a href="computadores.html">Computadores</a>
        <a href="index.html" onclick="logout()">Sair</a>
    </nav>
</header>

<div class="form-area">
    <input type="text" id="titulo" placeholder="TÃ­tulo da tarefa">
    <input type="text" id="descricao" placeholder="DescriÃ§Ã£o detalhada">
    <select id="prioridade">
        <option value="alta">ðŸ”´ Alta</option>
        <option value="media">ðŸŸ  MÃ©dia</option>
        <option value="baixa">ðŸŸ¢ Baixa</option>
    </select>
    <input type="date" id="data">
    <button onclick="adicionarTarefa()">Adicionar</button>
</div>

<div class="kanban">
    <div class="coluna" id="alta"><h3>ðŸ”´ Alta</h3></div>
    <div class="coluna" id="media"><h3>ðŸŸ  MÃ©dia</h3></div>
    <div class="coluna" id="baixa"><h3>ðŸŸ¢ Baixa</h3></div>
</div>


<div class="footer-tarefas">
    <p>Qualquer dÃºvida: <a href="mailto:gustavo.aquiel@jbs.com.br">gustavo.aquiel@jbs.com.br</a></p>
    <p>Desenvolvido por: <strong>Gustavo Aquiel</strong></p>
</div>

<script>
let usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));

if(!usuarioLogado){
    alert("Acesso nÃ£o autorizado");
    window.location.href="index.html";
}

let tarefas = JSON.parse(localStorage.getItem("tarefas")) || [];

function salvarLocal(){
    localStorage.setItem("tarefas", JSON.stringify(tarefas));
}


function tarefasDoUsuario(){
    return tarefas
        .map((t, index) => ({...t, originalIndex: index}))
        .filter(t => t.uid === usuarioLogado.uid);
}

function renderizar(){
    document.getElementById("alta").innerHTML = "<h3>ðŸ”´ Alta</h3>";
    document.getElementById("media").innerHTML = "<h3>ðŸŸ  MÃ©dia</h3>";
    document.getElementById("baixa").innerHTML = "<h3>ðŸŸ¢ Baixa</h3>";

    const lista = tarefasDoUsuario();

    lista.forEach((tarefa) => {
        const card = document.createElement("div");
        card.className = "card";
        if(tarefa.concluida) card.classList.add("concluida");

        card.innerHTML = `
            <div class="card-actions">
                <i class="fa-solid fa-check" onclick="concluir(${tarefa.originalIndex})"></i>
                <i class="fa-solid fa-trash" onclick="excluir(${tarefa.originalIndex})"></i>
            </div>
            <strong>${tarefa.titulo}</strong>
            <small>${tarefa.descricao || ""}</small>
            <small>ðŸ“… ${tarefa.data || ""}</small>
        `;

        document.getElementById(tarefa.prioridade).appendChild(card);
    });
}

function adicionarTarefa(){
    const titulo = document.getElementById("titulo").value;
    const descricao = document.getElementById("descricao").value;
    const prioridade = document.getElementById("prioridade").value;
    const data = document.getElementById("data").value;

    if(!titulo){
        alert("Digite um tÃ­tulo");
        return;
    }

    tarefas.push({
        uid: usuarioLogado.uid,
        titulo,
        descricao,
        prioridade,
        data,
        concluida:false
    });

    salvarLocal();
    renderizar();

    document.getElementById("titulo").value="";
    document.getElementById("descricao").value="";
    document.getElementById("data").value="";
}

function concluir(index){
    if(tarefas[index].uid !== usuarioLogado.uid) return;
    tarefas[index].concluida = !tarefas[index].concluida;
    salvarLocal();
    renderizar();
}

function excluir(index){
    if(tarefas[index].uid !== usuarioLogado.uid) return;
    if(!confirm("Deseja excluir esta tarefa?")) return;
    tarefas.splice(index,1);
    salvarLocal();
    renderizar();
}

function logout(){
    localStorage.removeItem("usuarioLogado");
    window.location.href="index.html";
}

renderizar();
</script>

</body>
</html>
